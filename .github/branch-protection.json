{
  "branch_protection_rules": {
    "main": {
      "required_status_checks": {
        "strict": true,
        "contexts": [
          "Unit Tests",
          "Linting",
          "TypeScript Type Checking",
          "API Integration Tests",
          "Test Summary"
        ]
      },
      "required_pull_request_reviews": {
        "required_approving_review_count": 1,
        "dismiss_stale_reviews": true,
        "require_code_owner_reviews": false,
        "require_last_push_approval": false
      },
      "enforce_admins": true,
      "required_linear_history": false,
      "allow_force_pushes": false,
      "allow_deletions": false,
      "required_conversation_resolution": true,
      "lock_branch": false,
      "allow_fork_syncing": false
    },
    "develop": {
      "required_status_checks": {
        "strict": true,
        "contexts": [
          "Unit Tests",
          "Linting",
          "TypeScript Type Checking",
          "API Integration Tests"
        ]
      },
      "required_pull_request_reviews": {
        "required_approving_review_count": 1,
        "dismiss_stale_reviews": true
      },
      "enforce_admins": false,
      "allow_force_pushes": false,
      "allow_deletions": false
    }
  },
  "setup_instructions": {
    "github_ui": [
      "1. Go to repository Settings > Branches",
      "2. Click 'Add branch protection rule'",
      "3. Enter branch name pattern (main or develop)",
      "4. Configure settings according to the JSON above",
      "5. Click 'Create' or 'Save changes'"
    ],
    "github_cli": [
      "Install GitHub CLI: brew install gh",
      "Authenticate: gh auth login",
      "For main branch:",
      "  gh api repos/:owner/:repo/branches/main/protection -X PUT --input .github/branch-protection-main.json",
      "For develop branch:",
      "  gh api repos/:owner/:repo/branches/develop/protection -X PUT --input .github/branch-protection-develop.json"
    ]
  },
  "important_notes": [
    "All PRs to main must have passing tests",
    "Coverage threshold of 80% is enforced in the test workflow",
    "At least 1 approval required before merge",
    "Stale reviews are automatically dismissed when new commits are pushed",
    "Force pushes are blocked to prevent history rewriting",
    "Security scanning is recommended but not blocking by default"
  ]
}
