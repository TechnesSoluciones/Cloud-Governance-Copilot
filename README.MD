# Cloud Governance Copilot

> Plataforma centralizada que unifica el acceso a 6 SaaS del ecosistema cloud bajo un solo portal, con IA integrada, gestiÃ³n multi-tenant y automatizaciones inteligentes.

[![Version](https://img.shields.io/badge/version-0.1.0-blue.svg)](https://github.com/yourorg/cloud-governance-copilot)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Status](https://img.shields.io/badge/status-planning-yellow.svg)](PLANNING.MD)

---

## ğŸ¯ Â¿QuÃ© es Cloud Governance Copilot?

Cloud Governance Copilot es un **portal unificado** que centraliza la gestiÃ³n de mÃºltiples herramientas SaaS especializadas en cloud governance. En lugar de alternar entre 6 plataformas diferentes, obtienes:

- ğŸ›ï¸ **Portal Ãšnico:** Accede a todos los SaaS desde un dashboard centralizado
- ğŸ¤– **IA Integrada:** Insights automÃ¡ticos que correlacionan datos entre mÃ³dulos
- ğŸ’° **Pricing Flexible:** Planes que se adaptan desde consultores independientes hasta MSPs enterprise
- ğŸ¢ **Multi-Tenant:** Gestiona mÃºltiples clientes/organizaciones desde una cuenta
- ğŸ›’ **Marketplace:** Extensiones, integraciones y automatizaciones

---

## ğŸ§© Los 6 SaaS del Ecosistema

### 1. OneCloud Dashboard
**Panel unificado multi-cloud**
- KPIs en tiempo real de AWS, Azure y GCP
- Health overview de infraestructura
- Alertas consolidadas
- MÃ©tricas de disponibilidad

### 2. Spend Navigator
**FinOps Platform con IA**
- Forecasting de costos con ML (Prophet, XGBoost)
- DetecciÃ³n de anomalÃ­as de gasto
- Recomendaciones de rightsizing
- AnÃ¡lisis de optimizaciÃ³n

### 3. Security Misconfig Scanner
**Auditor de seguridad automatizado**
- Escaneo de configuraciones inseguras
- Compliance checks (CIS, NIST, PCI-DSS)
- PriorizaciÃ³n de riesgos
- Playbooks de remediaciÃ³n

### 4. Asset 360
**Inventario inteligente de recursos cloud**
- Discovery automÃ¡tico multi-cloud
- ClasificaciÃ³n por IA
- DetecciÃ³n de recursos huÃ©rfanos
- Cost allocation por tags

### 5. Incident IQ
**AutomatizaciÃ³n de respuesta a incidentes**
- Auto-remediation (restart, isolate, scale)
- IntegraciÃ³n con Slack, Teams, Jira
- Workflows personalizables
- Runbooks inteligentes

### 6. Advisor Report
**Reportes ejecutivos automatizados**
- AnÃ¡lisis por IA de infraestructura
- Recomendaciones accionables
- ExportaciÃ³n a PDF/HTML
- Branding personalizable

---

## ğŸš€ Quick Start

### Prerequisites

- **Docker** (v24.0+) y **Docker Compose** (v2.20+)
- **Node.js** (v20+) para desarrollo local
- **Make** (opcional pero recomendado)
- **Git**
- **Hetzner VPS** (CX41 o superior recomendado) para producciÃ³n

### Initial Setup - Local Development

```bash
# 1. Clonar el repositorio
git clone <repository-url>
cd cloud-governance-copilot

# 2. Copiar y configurar variables de entorno
cp .env.example .env
# Editar .env con tus credenciales

# 3. Crear docker-compose.yml desde el ejemplo
cp docker-compose.example.yml docker-compose.yml

# 4. Iniciar todos los servicios
docker-compose up -d

# 5. Verificar que todos los contenedores estÃ©n running
docker-compose ps

# 6. Ver logs
docker-compose logs -f
```

### Acceder a las Aplicaciones (Local)

```bash
# Frontend
http://localhost:3000              # Copilot Portal
http://localhost:3001              # OneCloud Dashboard
http://localhost:3002              # Spend Navigator
http://localhost:3003              # Security Misconfig
http://localhost:3004              # Asset 360
http://localhost:3005              # Incident IQ
http://localhost:3006              # Advisor Report

# Backend
http://localhost:4000              # API Gateway
http://localhost:4000/docs         # API Documentation (Swagger)

# Database & Cache
localhost:5432                     # PostgreSQL
localhost:6379                     # Redis
```

### ConfiguraciÃ³n de Variables de Entorno

El archivo `.env.example` contiene todas las variables necesarias:

```bash
# Copiar el archivo de ejemplo
cp .env.example .env

# Editar con tus credenciales
vim .env  # o nano .env
```

**Variables crÃ­ticas a configurar:**
```bash
# Database
POSTGRES_PASSWORD=your_strong_password

# Authentication
JWT_SECRET=your_jwt_secret_min_32_chars
NEXTAUTH_SECRET=your_nextauth_secret

# OpenAI (para AI Insights)
OPENAI_API_KEY=sk-your-api-key

# Cloud Providers (para integraciones)
AWS_ACCESS_KEY_ID=your_key
AWS_SECRET_ACCESS_KEY=your_secret

# Stripe (para billing)
STRIPE_SECRET_KEY=sk_test_your_key
```

---

## ğŸ“‹ Comandos Disponibles

### GestiÃ³n del Ambiente (Docker Compose)

```bash
# Iniciar todos los servicios
docker-compose up -d

# Ver estado de servicios
docker-compose ps

# Ver logs
docker-compose logs -f                    # Todos los servicios
docker-compose logs -f copilot-portal     # Solo Copilot Portal
docker-compose logs -f api-gateway        # Solo API Gateway

# Detener todos los servicios
docker-compose down

# Reiniciar servicios
docker-compose restart

# Reconstruir imÃ¡genes
docker-compose build
docker-compose up -d --build

# Eliminar todo (âš ï¸ incluyendo volÃºmenes)
docker-compose down -v
```

### Desarrollo

```bash
# Shell en contenedor especÃ­fico
docker-compose exec copilot-portal sh
docker-compose exec api-gateway sh
docker-compose exec postgres psql -U copilot -d copilot_main

# Ver logs en tiempo real de un servicio
docker-compose logs -f --tail=100 copilot-portal

# Ejecutar comando en contenedor
docker-compose exec api-gateway npm run test
```

### Base de Datos (PostgreSQL)

```bash
# Ejecutar migraciones
docker-compose exec api-gateway npm run migrate

# Seed con datos de ejemplo
docker-compose exec api-gateway npm run seed

# Backup de base de datos
docker-compose exec postgres pg_dump -U copilot copilot_main > backup.sql

# Restaurar desde backup
docker-compose exec -T postgres psql -U copilot copilot_main < backup.sql

# Acceder a psql
docker-compose exec postgres psql -U copilot -d copilot_main

# Resetear BD (âš ï¸ borra todos los datos)
docker-compose exec postgres psql -U copilot -c "DROP DATABASE copilot_main; CREATE DATABASE copilot_main;"
```

### Testing

```bash
make test              # Ejecutar todos los tests
make test-unit         # Solo unit tests
make test-integration  # Solo integration tests
make test-e2e          # Solo E2E tests
make test-coverage     # Tests con reporte de coverage
```

### Code Quality

```bash
make lint              # Ejecutar linters (backend + frontend)
make format            # Formatear cÃ³digo (Prettier + ESLint)
make type-check        # Verificar tipos de TypeScript
```

---

## ğŸ— Estructura del Proyecto

```
cloud-governance-copilot/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ frontend/              # Next.js + React + Tailwind
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ app/          # Pages (App Router)
â”‚   â”‚   â”‚   â”œâ”€â”€ components/   # React components
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/        # Custom hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ services/     # API clients
â”‚   â”‚   â”‚   â””â”€â”€ types/        # TypeScript types
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ api-gateway/          # Node.js + Express
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ routes/       # API endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ middleware/   # Auth, RBAC, validation
â”‚   â”‚   â”‚   â”œâ”€â”€ services/     # Business logic
â”‚   â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ workers/              # Lambda workers
â”‚       â”œâ”€â”€ auth-service/
â”‚       â”œâ”€â”€ tenant-service/
â”‚       â”œâ”€â”€ billing-service/
â”‚       â””â”€â”€ ai-insights/
â”‚
â”œâ”€â”€ packages/                 # CÃ³digo compartido
â”‚   â”œâ”€â”€ shared-types/         # TypeScript types
â”‚   â”œâ”€â”€ ui-components/        # Shared UI components
â”‚   â””â”€â”€ utils/                # Utilidades comunes
â”‚
â”œâ”€â”€ infrastructure/           # Infrastructure as Code
â”‚   â””â”€â”€ terraform/
â”‚       â”œâ”€â”€ modules/          # MÃ³dulos reutilizables
â”‚       â”‚   â”œâ”€â”€ networking/
â”‚       â”‚   â”œâ”€â”€ compute/
â”‚       â”‚   â”œâ”€â”€ database/
â”‚       â”‚   â””â”€â”€ storage/
â”‚       â””â”€â”€ environments/     # Ambientes
â”‚           â”œâ”€â”€ dev/
â”‚           â”œâ”€â”€ staging/
â”‚           â””â”€â”€ production/
â”‚
â”œâ”€â”€ docs/                     # DocumentaciÃ³n adicional
â”‚   â”œâ”€â”€ architecture/
â”‚   â”œâ”€â”€ api/
â”‚   â””â”€â”€ guides/
â”‚
â”œâ”€â”€ Context_Docs/             # Documentos de contexto del proyecto
â”‚   â”œâ”€â”€ PRD.MD               # Product Requirements Document
â”‚   â”œâ”€â”€ PLANNING.MD          # Planning detallado (24 sprints)
â”‚   â”œâ”€â”€ TASK.MD              # Task breakdown y estado
â”‚   â””â”€â”€ CLAUDE.MD            # GuÃ­a tÃ©cnica para Claude Code
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Makefile
â”œâ”€â”€ .env.example
â””â”€â”€ README.MD                 # Este archivo
```

---

## ğŸ›  Stack TecnolÃ³gico

### Frontend
- **Framework:** Next.js 14 (App Router)
- **UI:** React 18 + TypeScript
- **Styling:** Tailwind CSS
- **Components:** Shadcn/ui
- **State:** Zustand + TanStack Query
- **Charts:** Recharts

### Backend
- **API Gateway:** Node.js + Express
- **Workers:** Python (AI workers)
- **Authentication:** JWT + Passport.js + OAuth 2.0
- **Validation:** Zod (Node.js) / Pydantic (Python)

### Database & Cache
- **Primary DB:** PostgreSQL 15+ (multi-tenant)
- **Extensions:** TimescaleDB (time-series), pg_trgm (full-text)
- **Cache:** Redis 7+ (sessions, rate limiting, queue)
- **ORM:** Prisma (Node.js) / SQLAlchemy (Python)

### AI & ML
- **LLM:** OpenAI GPT-4
- **Framework:** LangChain
- **Vector DB:** Pinecone (para RAG - futuro)

### Infrastructure (Hetzner VPS)
- **Provider:** Hetzner Cloud
- **Compute:** Docker + Docker Compose (7+ contenedores)
- **Reverse Proxy:** Nginx (SSL con Let's Encrypt)
- **Storage:** Docker Volumes + Hetzner Object Storage (backups)
- **Monitoring:** Prometheus + Grafana (opcional)
- **Logs:** Docker logs + Loki (opcional)

### DevOps
- **Containers:** Docker + Docker Compose
- **CI/CD:** GitHub Actions
- **Deployment:** SSH + Docker Compose pull/restart
- **Backups:** PostgreSQL dump diario â†’ Hetzner Object Storage
- **SSL:** Certbot automÃ¡tico
- **Testing:** Jest, Playwright, K6

---

## ğŸ¯ Features Principales

### âœ… Fase 1: Foundation (Meses 1-3)
- [x] DocumentaciÃ³n completa (PRD, Planning, Tasks)
- [ ] AutenticaciÃ³n + MFA
- [ ] Multi-tenancy con aislamiento de datos
- [ ] RBAC (5 roles predefinidos)
- [ ] Dashboard base con navegaciÃ³n
- [ ] Conectividad AWS

### ğŸš§ Fase 2: Integration (Meses 4-6)
- [ ] IntegraciÃ³n OneCloud Dashboard
- [ ] IntegraciÃ³n Spend Navigator
- [ ] IntegraciÃ³n Security Misconfig
- [ ] IntegraciÃ³n Asset 360
- [ ] IntegraciÃ³n Incident IQ
- [ ] IntegraciÃ³n Advisor Report
- [ ] Sistema de lÃ­mites por plan

### ğŸ”® Fase 3: AI & Automation (Meses 7-9)
- [ ] AI Insights Engine
- [ ] Cross-module recommendations
- [ ] Automated workflows
- [ ] Predictive analytics
- [ ] Chat assistant (beta)

### ğŸ“¦ Fase 4: Marketplace & Launch (Meses 10-12)
- [ ] Marketplace de add-ons
- [ ] White-label para MSPs
- [ ] Custom branding
- [ ] SSO (SAML 2.0)
- [ ] API pÃºblica
- [ ] Beta Launch
- [ ] GA Launch

---

## ğŸ“Š Planes de SuscripciÃ³n

| Plan | Precio/mes | Tenants | Reportes/mes | Scans/mes | Incidentes/mes |
|------|-----------|---------|--------------|-----------|----------------|
| **Starter** | $49 | 1 | 10 | 50 | 100 |
| **Pro** | $149 | 5 | 50 | 200 | 500 |
| **Business** | $399 | 15 | 200 | 1,000 | 2,000 |
| **Premium** | $999 | 50 | 1,000 | 5,000 | 10,000 |
| **Enterprise** | Custom | Unlimited | Unlimited | Unlimited | Unlimited |

**Todas las funcionalidades incluyen:**
- Acceso a los 6 SaaS
- AI Insights bÃ¡sicos
- Soporte por email
- Integraciones multi-cloud (AWS, Azure, GCP)

**Premium y Enterprise incluyen:**
- White-label
- Custom branding
- SSO (SAML)
- API access
- Soporte prioritario
- Custom workflows

---

## ğŸ” Seguridad

### Implementaciones de Seguridad

- âœ… **Zero Trust Architecture:** ValidaciÃ³n en cada request
- âœ… **Multi-Tenancy Isolation:** Aislamiento estricto de datos
- âœ… **Encryption at Rest:** DynamoDB encryption enabled
- âœ… **Encryption in Transit:** TLS 1.3
- âœ… **JWT Authentication:** Con refresh tokens
- âœ… **MFA:** TOTP + Backup codes
- âœ… **RBAC:** Role-Based Access Control granular
- âœ… **Rate Limiting:** Por IP y por usuario
- âœ… **Audit Logs:** Trazabilidad completa

### Compliance

- **SOC 2 Type II:** Ready
- **GDPR:** Compliant
- **HIPAA:** En roadmap
- **ISO 27001:** En roadmap

### Best Practices

```bash
# Nunca commits secrets
git-secrets --install

# Escaneo de vulnerabilidades
npm audit
snyk test

# Penetration testing
npm run test:security
```

---

## ğŸ“ˆ Roadmap

### 2025 Q1 (Meses 1-3) - Foundation
- [x] Planning completo
- [ ] MVP del portal
- [ ] AutenticaciÃ³n + Multi-tenancy
- [ ] Dashboard base
- [ ] Conectividad AWS

### 2025 Q2 (Meses 4-6) - Integration
- [ ] IntegraciÃ³n de los 6 SaaS
- [ ] Sistema de lÃ­mites
- [ ] Conectividad Azure + GCP
- [ ] Billing con Stripe

### 2025 Q3 (Meses 7-9) - AI & Automation
- [ ] AI Insights Engine
- [ ] Cross-module analytics
- [ ] Automated workflows
- [ ] Chat assistant

### 2025 Q4 (Meses 10-12) - Launch
- [ ] Marketplace
- [ ] White-label
- [ ] API pÃºblica
- [ ] Beta Launch (Mes 11)
- [ ] GA Launch (Mes 12)

### 2026+ - Growth
- [ ] Mobile apps (iOS, Android)
- [ ] Kubernetes cost optimization
- [ ] Advanced AI agents (autonomous actions)
- [ ] Partner ecosystem
- [ ] International expansion

---

## ğŸ§ª Testing

### Ejecutar Tests

```bash
# Todos los tests
make test

# Por tipo
make test-unit           # ~2min
make test-integration    # ~5min
make test-e2e            # ~15min

# Con coverage
make test-coverage       # Genera htmlcov/index.html
```

### Coverage Goals

- **Unit Tests:** >80% de coverage
- **Integration Tests:** Flujos crÃ­ticos completos
- **E2E Tests:** User journeys principales
- **Load Tests:** 50 tenants concurrentes

### Testing Strategy

```
Unit Tests (Jest)
â”œâ”€â”€ Services (business logic)
â”œâ”€â”€ Utilities
â””â”€â”€ Components (React Testing Library)

Integration Tests
â”œâ”€â”€ API endpoints
â”œâ”€â”€ Database operations
â””â”€â”€ External integrations

E2E Tests (Playwright)
â”œâ”€â”€ Onboarding flow
â”œâ”€â”€ Multi-tenant switching
â”œâ”€â”€ SaaS module navigation
â””â”€â”€ Billing upgrade
```

---

## ğŸ“š DocumentaciÃ³n

### Para Usuarios
- **[User Guide](docs/guides/user-guide.md)** - CÃ³mo usar el portal
- **[FAQ](docs/faq.md)** - Preguntas frecuentes
- **[Video Tutorials](docs/tutorials/)** - Tutoriales en video

### Para Desarrolladores
- **[CLAUDE.MD](Context_Docs/CLAUDE.MD)** - GuÃ­a tÃ©cnica completa del proyecto
- **[PLANNING.MD](Context_Docs/PLANNING.MD)** - Planning detallado (24 sprints)
- **[TASK.MD](Context_Docs/TASK.MD)** - Task breakdown y estado actual
- **[API Documentation](http://localhost:4000/docs)** - Swagger UI
- **[Architecture](docs/architecture/)** - Diagramas y decisiones

### Para Product Managers
- **[PRD.MD](Context_Docs/PRD.MD)** - Product Requirements Document
- **[KPIs Dashboard](docs/kpis.md)** - MÃ©tricas del producto
- **[Customer Feedback](docs/feedback/)** - Feedback de usuarios

---

## ğŸ¤ Contributing

Este es un proyecto privado. Para miembros del equipo:

### Workflow

1. **Crear branch desde main:**
   ```bash
   git checkout -b feature/US-123-short-description
   ```

2. **Desarrollar y commitear:**
   ```bash
   git commit -m "feat(auth): add MFA support"
   ```
   Usar [Conventional Commits](https://www.conventionalcommits.org/):
   - `feat:` - Nueva funcionalidad
   - `fix:` - Bug fix
   - `docs:` - DocumentaciÃ³n
   - `refactor:` - Refactoring
   - `test:` - Tests
   - `chore:` - Mantenimiento

3. **Push y crear PR:**
   ```bash
   git push origin feature/US-123-short-description
   ```
   Crear Pull Request con template completo

4. **Code Review:**
   - Requiere 1 aprobaciÃ³n
   - CI debe pasar (tests + linting)
   - No merge conflicts

5. **Merge:**
   - Squash and merge (para mantener historial limpio)
   - Delete branch despuÃ©s de merge

### Code Review Checklist

- [ ] CÃ³digo cumple con style guide
- [ ] Tests incluidos y pasando
- [ ] Sin console.logs o debuggers
- [ ] Sin credenciales hardcodeadas
- [ ] DocumentaciÃ³n actualizada
- [ ] Performance considerado
- [ ] Security considerations aplicadas

---

## ğŸ› Troubleshooting

### Servicios no inician

```bash
# Limpiar y reiniciar
make clean
make up

# Ver logs especÃ­ficos
docker-compose logs frontend
docker-compose logs api-gateway
```

### Puerto ya en uso

```bash
# Encontrar y matar proceso
lsof -ti:3000 | xargs kill -9  # Frontend
lsof -ti:4000 | xargs kill -9  # API Gateway
```

### Base de datos - Errores de conexiÃ³n

```bash
# Resetear DB local
make db-reset

# Recrear tablas
make migrate
```

### Frontend no conecta con backend

Verificar proxy en `next.config.js`:
```javascript
async rewrites() {
  return [
    {
      source: '/api/:path*',
      destination: 'http://api-gateway:4000/:path*'
    }
  ]
}
```

### Tests fallan en CI

```bash
# Ejecutar localmente
make test-ci  # Simula ambiente de CI

# Ver logs detallados
npm run test -- --verbose
```

---

## ğŸ“ Soporte

### Para el Equipo

- **Slack:** #copilot-dev
- **Jira:** [Proyecto Copilot](https://yourorg.atlassian.net/browse/COP)
- **Weekly Sync:** Jueves 10:00 AM
- **Tech Lead:** @tech-lead

### Para Usuarios (Post-Launch)

- **Email:** support@cloudcopilot.io
- **Chat:** Widget in-app
- **Documentation:** https://docs.cloudcopilot.io
- **Status Page:** https://status.cloudcopilot.io

---

## ğŸ“ License

MIT License - ver archivo [LICENSE](LICENSE)

---

## ğŸ™ Acknowledgments

**SaaS Modules:**
- OneCloud Dashboard Team
- Spend Navigator Team
- Security Misconfig Team
- Asset 360 Team
- Incident IQ Team
- Advisor Report Team

**Technologies:**
- Next.js por Vercel
- OpenAI por GPT-4
- AWS por infraestructura
- Tailwind CSS por styling

---

## ğŸ“ˆ Estado del Proyecto

**VersiÃ³n Actual:** 0.1.0 (Planning Phase)
**Sprint Actual:** Pre-Sprint 1
**PrÃ³ximo Milestone:** Sprint 6 - MVP Foundation Complete
**Timeline:** 12 meses hasta GA Launch
**Team Size:** 4-6 developers

### Progress Overview

```
Foundation     [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0%   (0/6 sprints)
Integration    [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0%   (0/6 sprints)
AI & Auto      [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0%   (0/6 sprints)
Launch         [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0%   (0/6 sprints)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Overall        [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0%   (0/24 sprints)
```

**Ãšltima actualizaciÃ³n:** 2025-12-04

---

## ğŸš¦ Quick Links

- ğŸ“‹ [PRD - Product Requirements](Context_Docs/PRD.MD)
- ğŸ“… [Planning - 24 Sprints Roadmap](Context_Docs/PLANNING.MD)
- âœ… [Tasks - Detailed Breakdown](Context_Docs/TASK.MD)
- ğŸ¤– [Claude Guide - Technical Context](Context_Docs/CLAUDE.MD)
- ğŸ—ï¸ [Architecture Diagrams](docs/architecture/)
- ğŸ“Š [API Documentation](http://localhost:4000/docs)

---

**Made with â¤ï¸ by the Cloud Governance Copilot Team**

[â¬† Back to top](#cloud-governance-copilot)
