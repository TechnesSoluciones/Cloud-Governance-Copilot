# Cloud Governance Copilot - Environment Variables
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!

# ============================================================
# Database Configuration (PostgreSQL)
# ============================================================
POSTGRES_USER=copilot
POSTGRES_PASSWORD=your_strong_password_here
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://copilot:your_strong_password_here@postgres:5432/copilot_main

# ============================================================
# Redis Configuration
# ============================================================
REDIS_PASSWORD=your_redis_password_here
REDIS_URL=redis://:your_redis_password_here@redis:6379
REDIS_HOST=redis
REDIS_PORT=6379

# ============================================================
# Authentication & Security
# ============================================================
JWT_SECRET=your_jwt_secret_key_min_32_chars
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# NextAuth (for frontend)
NEXTAUTH_SECRET=your_nextauth_secret_key_min_32_chars
NEXTAUTH_URL=https://copilot.yourdomain.com

# Session
SESSION_SECRET=your_session_secret_key

# Encryption key for sensitive data (credentials, etc.)
ENCRYPTION_KEY=your_encryption_key_32_chars

# ============================================================
# Cloud Provider APIs
# ============================================================

# AWS
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1

# Azure
AZURE_TENANT_ID=your_azure_tenant_id
AZURE_CLIENT_ID=your_azure_client_id
AZURE_CLIENT_SECRET=your_azure_client_secret
AZURE_SUBSCRIPTION_ID=your_azure_subscription_id

# GCP
GCP_PROJECT_ID=your_gcp_project_id
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# ============================================================
# External Services
# ============================================================

# AI Provider Configuration
# Choose one: 'azure' (recommended for production), 'openai' (dev/staging), or 'mock' (testing)
AI_PROVIDER=azure

# Azure OpenAI Service (Recommended for Production)
# See docs/AZURE_OPENAI_SETUP.md for detailed setup instructions
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your_azure_openai_api_key_here
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4
AZURE_OPENAI_DEPLOYMENT_NAME_TURBO=gpt-35-turbo
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# Azure OpenAI Model Configuration
AZURE_OPENAI_MODEL=gpt-4
AZURE_OPENAI_MAX_TOKENS=2000
AZURE_OPENAI_TEMPERATURE=0.7
AZURE_OPENAI_TIMEOUT_MS=30000
AZURE_OPENAI_MAX_RETRIES=3

# Alternative: Direct OpenAI API (for Development/Staging)
# Use this for lower-cost development environments
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# Azure Key Vault (Optional - for production secrets management)
AZURE_KEY_VAULT_NAME=copilot-keyvault
AZURE_KEY_VAULT_URL=https://copilot-keyvault.vault.azure.net/
AZURE_USE_MANAGED_IDENTITY=false
AZURE_OPENAI_KEY_SECRET_NAME=azure-openai-api-key

# Stripe (for Billing)
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Email (SendGrid or SMTP)
SENDGRID_API_KEY=SG.your_sendgrid_api_key
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=Cloud Governance Copilot

# SMTP Alternative
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_SECURE=false

# Slack (for notifications)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token

# ============================================================
# Application Configuration
# ============================================================

# Environment
NODE_ENV=development  # development | production | staging
APP_ENV=development

# API Configuration
API_PORT=4000
API_URL=http://localhost:4000
FRONTEND_URL=http://localhost:3000

# CORS
CORS_ORIGIN=http://localhost:3000,https://copilot.yourdomain.com

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================
# Domain Configuration (Production)
# ============================================================
DOMAIN=yourdomain.com
COPILOT_SUBDOMAIN=copilot
API_SUBDOMAIN=api
ONECLOUD_SUBDOMAIN=onecloud
SPEND_SUBDOMAIN=spend
SECURITY_SUBDOMAIN=security
ASSET_SUBDOMAIN=asset
INCIDENT_SUBDOMAIN=incident
ADVISOR_SUBDOMAIN=advisor

# SSL/TLS
LETSENCRYPT_EMAIL=admin@yourdomain.com
LETSENCRYPT_STAGING=false  # Set to true for testing

# ============================================================
# Monitoring & Logging (Optional)
# ============================================================
GRAFANA_PASSWORD=your_grafana_admin_password
PROMETHEUS_RETENTION=15d

# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development

# Log Level
LOG_LEVEL=info  # error | warn | info | debug

# ============================================================
# Hetzner Configuration (for backups)
# ============================================================

# Hetzner Storage Box (Recommended for PostgreSQL backups)
# Get credentials from: https://robot.hetzner.com/storage
STORAGEBOX_USER=u123456
STORAGEBOX_HOST=u123456.your-storagebox.de
STORAGEBOX_PORT=23
STORAGEBOX_SSH_KEY=/root/.ssh/hetzner_storagebox_rsa
STORAGEBOX_REMOTE_DIR=/backups/postgresql
LOCAL_BACKUP_DIR=/var/backups/postgresql
RETENTION_DAYS=30

# Hetzner Object Storage (Alternative - S3 compatible)
# Get credentials from: https://console.hetzner.cloud/
HETZNER_OBJECT_STORAGE_ACCESS_KEY=your_hetzner_s3_access_key
HETZNER_OBJECT_STORAGE_SECRET_KEY=your_hetzner_s3_secret_key
HETZNER_OBJECT_STORAGE_ENDPOINT=https://fsn1.your-objectstorage.com
HETZNER_BACKUP_BUCKET=copilot-backups

# ============================================================
# Feature Flags
# ============================================================
ENABLE_AI_INSIGHTS=true
ENABLE_MARKETPLACE=false
ENABLE_WHITE_LABEL=false
ENABLE_SSO=false
ENABLE_MONITORING=false

# ============================================================
# Development Only
# ============================================================
DEBUG=false
MOCK_CLOUD_APIS=false  # Use mocks instead of real cloud APIs
SEED_DATABASE=false    # Seed with sample data on startup

# ============================================================
# SaaS Module URLs (Internal Docker Network)
# ============================================================
ONECLOUD_API_URL=http://onecloud-dashboard:3001
SPEND_API_URL=http://spend-navigator:3002
SECURITY_API_URL=http://security-misconfig:3003
ASSET_API_URL=http://asset-360:3004
INCIDENT_API_URL=http://incident-iq:3005
ADVISOR_API_URL=http://advisor-report:3006
