# ============================================================
# Kubernetes Secrets Template
# IMPORTANT: This is a TEMPLATE file. Never commit actual secrets!
# ============================================================
# Usage:
# 1. Copy this file to secrets.yaml
# 2. Replace CHANGEME values with actual base64-encoded secrets
# 3. Add secrets.yaml to .gitignore
# 4. Apply: kubectl apply -f secrets.yaml
# ============================================================

apiVersion: v1
kind: Secret
metadata:
  name: copilot-secrets
  namespace: copilot
  labels:
    app: cloud-governance-copilot
type: Opaque
data:
  # Database Credentials (base64 encoded)
  # Example: echo -n "your-password" | base64
  POSTGRES_PASSWORD: CHANGEME_BASE64
  DATABASE_URL: CHANGEME_BASE64

  # Redis Credentials
  REDIS_PASSWORD: CHANGEME_BASE64
  REDIS_URL: CHANGEME_BASE64

  # JWT Secrets
  JWT_SECRET: CHANGEME_BASE64
  JWT_REFRESH_SECRET: CHANGEME_BASE64
  NEXTAUTH_SECRET: CHANGEME_BASE64

  # Encryption Key (32 bytes hex, base64 encoded)
  ENCRYPTION_KEY: CHANGEME_BASE64

  # API Keys
  OPENAI_API_KEY: CHANGEME_BASE64
  STRIPE_SECRET_KEY: CHANGEME_BASE64
  STRIPE_WEBHOOK_SECRET: CHANGEME_BASE64

  # Email Provider
  SENDGRID_API_KEY: CHANGEME_BASE64

  # Monitoring (Optional)
  SENTRY_DSN: CHANGEME_BASE64
---
# TLS Secret for HTTPS (if using cert-manager, this is auto-generated)
# Otherwise, create manually:
# kubectl create secret tls copilot-tls --cert=path/to/tls.crt --key=path/to/tls.key -n copilot
apiVersion: v1
kind: Secret
metadata:
  name: copilot-tls
  namespace: copilot
type: kubernetes.io/tls
data:
  # Base64 encoded TLS certificate
  tls.crt: CHANGEME_BASE64
  # Base64 encoded TLS private key
  tls.key: CHANGEME_BASE64
---
# ============================================================
# Helper Commands for Creating Secrets:
# ============================================================
# Generate random JWT secret:
# openssl rand -base64 64 | base64
#
# Create secret from file:
# kubectl create secret generic copilot-secrets --from-env-file=.env.production -n copilot
#
# View secret:
# kubectl get secret copilot-secrets -n copilot -o jsonpath='{.data.JWT_SECRET}' | base64 -d
#
# Create TLS secret from files:
# kubectl create secret tls copilot-tls --cert=tls.crt --key=tls.key -n copilot
# ============================================================
